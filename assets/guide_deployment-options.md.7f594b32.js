import{_ as e,c as t,o as a,Q as r}from"./chunks/framework.24343ae2.js";const m=JSON.parse('{"title":"Deployment options","description":"","frontmatter":{},"headers":[],"relativePath":"guide/deployment-options.md","lastUpdated":1679256125000}'),s={name:"guide/deployment-options.md"},o=r('<h1 id="deployment-options" tabindex="-1">Deployment options <a class="header-anchor" href="#deployment-options" aria-label="Permalink to &quot;Deployment options&quot;">​</a></h1><p>If the Inverter is close to your server/SBC running Home Assistant, you can use the standard deployment option, else you can extend the RS485 over Ethernet via a gateway or even MQTT</p><ol><li><p>Standard</p><p>The Sunsynk Add-on runs on the Home Assistant OS, reads the Inverter&#39;s Modbus registers over RS-485, and publishes sensor values to the MQTT server. The architecture is shown below:</p><p><img src="https://github.com/kellerza/sunsynk/raw/main/images/deploy.png" alt="Deployment Option"></p></li><li><p>A Modbus TCP to RTU/serial gateway</p><p>This can be another Raspberry Pi, even an old one, running the gateway software, like <a href="./mbusd">mbusd</a>.</p><p>You can also use a commercial Modbus gateway, like the USR-W630</p><p><img src="https://github.com/kellerza/sunsynk/raw/main/images/deploy-gw.png" alt="Deployment Option Gateway"></p></li><li><p>Extend with an MQTT gateway</p><p>This remote option runs the Sunsynk Addon close to the Inverter, and then sends MQTT messages over your network toward the MQTT server (typically on the same server as Home Assistant)</p><p><img src="https://github.com/kellerza/sunsynk/raw/main/images/deploy-mqtt.png" alt="Deployment Option MQTT"></p></li></ol><h2 id="connect-to-your-inverter-with-rs485" tabindex="-1">Connect to your Inverter with RS485 <a class="header-anchor" href="#connect-to-your-inverter-with-rs485" aria-label="Permalink to &quot;Connect to your Inverter with RS485&quot;">​</a></h2><p>RS485 requires a twisted pair, this works with CAT5 network cable and RJ-45 connectors.</p><p>If the RJ-45 connector on the inverter side is crimped according to <a href="https://en.wikipedia.org/wiki/ANSI/TIA-568#Wiring" target="_blank" rel="noreferrer">T568A</a>, you can use the pinout in the following table.</p><table><thead><tr><th style="text-align:center;">RJ45 Pin<br>(inverter side)</th><th style="text-align:center;">Wire Color<br>(when using T568A)</th><th style="text-align:center;">RS485<br>pins</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">Green-White</td><td style="text-align:center;">B/D-</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Green</td><td style="text-align:center;">A/D+</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">Orange-White</td><td style="text-align:center;">GND</td></tr></tbody></table><h3 id="usb-to-rs485-adaptors" tabindex="-1">USB-to-RS485 adaptors <a class="header-anchor" href="#usb-to-rs485-adaptors" aria-label="Permalink to &quot;USB-to-RS485 adaptors&quot;">​</a></h3><ol><li><p>Wave USB-to-RS485 <a href="https://www.robotics.org.za/W17286" target="_blank" rel="noreferrer">example</a></p><p>This is my preferred adaptor. It includes a GND and lightning/ESD protection, TVS diodes and a resettable fuse.</p><p>Wave also has a RS485-to-Ethernet module. (not tested)</p><img src="https://github.com/kellerza/sunsynk/raw/main/images/usb-wave-rs485.jpg" width="55%"></li><li><p>USB-to-RS485 adaptor with cable <a href="https://www.robotics.org.za/index.php?route=product/product&amp;product_id=5947" target="_blank" rel="noreferrer">example</a></p><p>Includes a GND and TVS diode and USB self recovery options.</p><img src="https://github.com/kellerza/sunsynk/raw/main/images/usb-rs485-cable.jpg" width="55%"></li></ol><p>Other tested adaptors</p><ul><li><p>USB-to-RS485 3 Pin adaptor <a href="https://www.robotics.org.za/RS485-3P" target="_blank" rel="noreferrer">example</a></p><p>Includes a GND and TVS diode and USB self recovery options.</p></li><li><p>2-Wire USB-to-RS485 <a href="https://www.robotics.org.za/RS485-MINI" target="_blank" rel="noreferrer">example</a></p><p>This is the adaptor I started with. It works, but does not include a GND, so your success might vary.</p><img src="https://github.com/kellerza/sunsynk/raw/main/images/usb-rs485-rj45.png" width="35%"></li></ul><h3 id="rs485-gateways" tabindex="-1">RS485 gateways <a class="header-anchor" href="#rs485-gateways" aria-label="Permalink to &quot;RS485 gateways&quot;">​</a></h3><ol><li><p>USR-W630 Wifi-to-RS485</p><p>This is a tested Wifi-to-RS485 gateway, which also includes a GND.</p><p>Requires <code>READ_SENSORS_BATCH_SIZE</code> set to 8 or less</p></li><li><p>HF5142B Modbus/serial to ethernet (4x RS232/485/422 to 4x E-Ports)</p><p><img src="https://github.com/kellerza/sunsynk/raw/main/images/eth-hf5142.png" alt="settings"></p><p>This gateway was tested with the Deye 8k EU Hybrid inverter. The following serial settings were used:</p><img src="https://github.com/kellerza/sunsynk/raw/main/images/eth-hf5142-settings.png" width="80%" alt="settings"></li></ol>',13),n=[o];function i(l,p,d,h,c,g){return a(),t("div",null,n)}const y=e(s,[["render",i]]);export{m as __pageData,y as default};
